<? $GLOBALS['_____279477493'] = array(base64_decode('S' . 'W' . '5jb' . 'H' . 'V' . 'k' . 'ZU' . '1' . 'vZHVs' . 'ZUx' . 'hbmdGaWxl'));
$GLOBALS['____1363452446'] = array(base64_decode('ZGV' . 'maW5l'), base64_decode('' . 'c' . '3Ry' . 'cm' . 'V2'), base64_decode('c' . '3' . 'RydG91cHBlcg=' . '='), base64_decode('ZGlybmFtZQ=='), base64_decode('c3R' . 'y' . 'cmV2'), base64_decode('aW1wbG' . '9kZ' . 'Q=='), base64_decode('Z' . 'GF0ZQ=='), base64_decode('' . 'bWt0aW' . '1l'), base64_decode('ZGF0' . 'ZQ=='), base64_decode('ZGF0ZQ=='), base64_decode('ZGF0' . 'ZQ=' . '='), base64_decode('' . 'ZGF' . '0ZQ=='), base64_decode('bW' . 't0aW' . '1' . 'l'), base64_decode('ZGF' . '0Z' . 'Q=' . '='), base64_decode('ZGF0Z' . 'Q' . '=='), base64_decode('' . 'Z' . 'G' . 'F0ZQ=' . '='), base64_decode('Z' . 'GF0ZQ' . '=' . '='), base64_decode('bWt0a' . 'W1' . 'l'), base64_decode('' . 'ZGF0ZQ=='), base64_decode('ZGF' . '0ZQ=='), base64_decode('ZGF0Z' . 'Q=='), base64_decode('c' . '3V' . 'ic3Ry'), base64_decode('c' . '3Vic3' . 'Ry'), base64_decode('c3Vic3R' . 'y'), base64_decode('c3V' . 'ic3Ry'), base64_decode('c3Vic3Ry'), base64_decode('c3V' . 'i' . 'c' . '3' . 'Ry'), base64_decode('c3Vic3Ry'), base64_decode('c3Vic3Ry'), base64_decode('c3Ry' . 'c' . 'mV2'), base64_decode('c' . '3Bya' . 'W50Zg=='), base64_decode('c3RybGV' . 'u'), base64_decode('c3Ry' . 'bGVu'), base64_decode('Y' . '2h' . 'y'), base64_decode('b3Jk'), base64_decode('b3' . 'Jk'), base64_decode('Ym' . 'F' . 'zZ' . 'T' . 'Y0' . 'X2VuY29kZQ=='), base64_decode('Z' . 'mlsZV9le' . 'Gl' . 'zd' . 'HM='), base64_decode('Zm9wZW4='), base64_decode('Z' . 'ndy' . 'a' . 'XRl'), base64_decode('ZmNsb' . '3N' . 'l'), base64_decode('c3Bya' . 'W' . '50' . 'Zg=='), base64_decode('c3' . 'Vic3Ry'), base64_decode('c3Rycm' . 'V' . '2'), base64_decode('ZGF0Z' . 'Q=' . '='), base64_decode('bWt0aW' . '1l'), base64_decode('' . 'ZGF' . '0ZQ=='), base64_decode('ZG' . 'F0' . 'ZQ' . '=' . '='), base64_decode('Z' . 'G' . 'F0ZQ=='), base64_decode('ZGF' . '0' . 'ZQ=='), base64_decode('' . 'bWt0a' . 'W1' . 'l'), base64_decode('ZGF0ZQ=='), base64_decode('ZG' . 'F0ZQ=='), base64_decode('ZGF0ZQ=='), base64_decode('' . 'ZG' . 'F0ZQ=' . '='), base64_decode('bWt0' . 'aW1l'), base64_decode('Z' . 'GF0' . 'ZQ=='), base64_decode('' . 'ZGF' . '0' . 'ZQ=='), base64_decode('ZGF0ZQ=='), base64_decode('c' . '3Vic3' . 'Ry'), base64_decode('c3Vic3Ry'), base64_decode('c3Vic3Ry'), base64_decode('c3Vi' . 'c' . '3R' . 'y'), base64_decode('c3Vic3Ry'), base64_decode('' . 'c3Vic3Ry'), base64_decode('' . 'c3Vic3' . 'Ry'), base64_decode('c3Vic3' . 'Ry'), base64_decode('c3Vic3Ry'), base64_decode('c3' . 'Ry' . 'bG' . 'Vu'), base64_decode('c3Ry' . 'bGVu'), base64_decode('Y2hy'), base64_decode('b3Jk'), base64_decode('' . 'b3' . 'Jk'), base64_decode('c3ByaW50Zg=' . '='), base64_decode('c3' . 'Vic3Ry'), base64_decode('c3Ry' . 'cm' . 'V2'), base64_decode('YmF' . 'zZTY' . '0X2VuY' . '29kZ' . 'Q=='), base64_decode('aX' . 'Nfb2' . 'JqZWN0'), base64_decode('' . 'ZGlybmFtZQ=='), base64_decode('YXJyY' . 'Xl' . 'fa2V5X2V4aX' . 'N0cw=='), base64_decode('ZGlybmFtZQ=='), base64_decode('' . 'Z' . 'Glyb' . 'mFtZQ=' . '='), base64_decode('' . 'ZG' . 'ly' . 'bm' . 'FtZQ=='), base64_decode('aXN' . 'fYXJyY' . 'Xk='), base64_decode('c3R' . 'ybGV' . 'u'), base64_decode('dmVyc2' . 'l' . 'vbl9jb2' . '1wYX' . 'Jl'), base64_decode('ZGl' . 'y' . 'bmF' . 'tZQ=='), base64_decode('YX' . 'JyYXlfa2V5cw=='), base64_decode('' . 'Y' . '2' . '91bnQ='), base64_decode('c3RybG' . 'Vu'));



if (!function_exists(__NAMESPACE__ . '\\___826180718')) {
    function ___826180718($_887384039)
    {
        static $_350827760 = false;
        if ($_350827760 == false) $_350827760 = array('Z29vZGRl' . 'X3l' . 'hb' . 'mRleH' . 'R1cmJ' . 'vYX' . 'BpX' . 'w==', 'b' . '21lZA' . '==', 'WQ==', '' . 'L3Zl' . 'cnN' . 'pb24' . 'ucGhw', 'VkVSU0l' . 'PTg==', 'VkV' . 'SU0lPT' . 'l9EQVRF', '' . 'R0' . '9PRERFX' . '1' . 'RZUkJPX0F' . 'Q' . 'SV' . '9NT0RVTEVfTk' . 'FNRQ==', 'R09' . 'P' . 'RERFX' . '1' . 'RZ' . 'Uk' . 'JPX' . '0FQ' . 'SV' . '9' . 'NT' . '0R' . 'VT' . 'EVf' . 'RE' . 'VTQ1J' . 'J' . 'U' . 'FRJT04' . '=', 'R09P' . 'RERFX1RZUkJ' . 'PX0F' . 'QSV9Q' . 'QV' . 'JUTkV' . 'S' . 'X05' . 'BT' . 'U' . 'U' . '=', 'R' . '09PRE' . 'RFX1RZ' . 'U' . 'kJP' . 'X0FQS' . 'V9QQV' . 'JUTkVS' . 'X1' . 'VS' . 'SQ==', 'Ym' . 'l0cml4', 'bW9k' . 'd' . 'Wxlcw' . '==', 'Z29vZG' . 'R' . 'l' . 'Lnlh' . 'bmRleHR1' . 'cm' . 'JvYXB' . 'p', 'YWRt' . 'aW4=', 'cGhwLm1zYl9l' . 'dGFkX3' . 'Jlc3U=', 'RE9' . 'DVU1F' . 'T' . 'lR' . 'fUk9PVA==', 'Lw==', 'Lw==', 'NjE4Mz' . 'VmZg==', 'ZA==', 'bQ=' . '=', 'Z' . 'A==', 'WQ' . '==', 'bQ' . '==', 'b' . 'Q' . '==', '' . 'ZA==', '' . 'W' . 'Q==', 'WQ==', 'b' . 'Q==', 'ZA==', 'WQ==', '', 'R' . 'VQ' . '=', 'SVM' . '=', '' . 'WA==', 'SVI=', 'VA=' . '=', '' . 'SQ=' . '=', 'Qg' . '=' . '=', '' . 'Yj' . 'czMTE=', 'JXMlcw==', 'Zjg0ZmEzMjQ1' . 'MW' . 'Z' . 'iMTEyN' . 'm' . 'VhMjY=', 'PA==', 'Pw==', '' . 'Z' . 'GV' . 'maW5' . 'lKCJnb' . '29' . 'kZ' . 'GV' . 'feWFuZ' . 'GV4dH' . 'VyYm' . '9hc' . 'GlfV' . 'EVNUE9SQVJZX0NBQ0h' . 'F' . 'Iiwg' . 'Ig==', 'Iik7', '' . 'P' . 'w==', 'Pg' . '==', 'dw=' . '=', 'ZHJtX' . '3N' . '0ZX' . 'Jnb2tj', 'R' . 'EI=', 'U0' . 'VMR' . 'UNUIFZB' . 'TF' . 'VF' . 'IE' . 'ZST0' . '0gYl9vcHR' . 'pb' . '24gV0' . 'hFUk' . 'Ug' . 'TkFNRT0' . 'n', 'JXMlcw==', 'fmJz', 'ZXRh' . 'ZF' . '9wbw==', 'J' . 'yBBTkQgT' . 'U9EVU' . 'x' . 'F' . 'X0lEPSdnb29k' . 'ZGUue' . 'WFu' . 'ZG' . 'V4dHVyYm9h' . 'cGkn', '' . 'N' . 'jlkYzZ' . 'jOTYz' . 'MWJ' . 'oeX' . 'Rvcw=' . '=', 'ZA' . '==', 'bQ==', 'Z' . 'A==', 'WQ=' . '=', 'bQ==', 'bQ==', 'ZA==', '' . 'WQ==', '' . 'W' . 'Q==', 'bQ=' . '=', 'ZA==', 'WQ==', '', '' . 'YQ' . '==', 'Qg==', 'UmE=', 'S2E=', 'ZA==', 'Q' . 'Q==', '' . 'QnJh', 'Z' . 'WEx', 'O' . 'TI4ZDEzNGRhZWI4M' . 'DI4NTNk', 'REI=', 'SU5TRVJU' . 'IElOVE8' . 'gY' . 'l' . '9vcHRpb24gKE' . '1P' . 'RFVMRV9JRCw' . 'gTk' . 'FNRSwgVkFMV' . 'UUpIFZBTFVFU' . 'ygn' . 'Z29vZ' . 'GRlLnlhbmRle' . 'H' . 'R' . '1cmJvYXBpJywg' . 'Jw==', 'JXMlcw=' . '=', 'f' . 'mJz', '' . 'Z' . 'XRhZF9wb' . 'w=' . '=', '' . 'Jy' . 'wgJ' . 'w=' . '=', 'R' . 'EI=', 'Jy' . 'k=', 'Q0FDSEVfTUFOQU' . 'dF' . 'Ug==', '' . 'Q0' . 'F' . 'DSEVfTUFOQUdF' . 'Ug' . '==', 'Yl9vc' . 'HR' . 'pb2' . '4=', 'L3NxbC9pbnN0Y' . 'Wxs' . 'L' . 'nNxb' . 'A==', 'c' . '2F2Z' . 'V9' . '0Y' . 'WJsZXM=', 'c2F2ZV90YW' . 'JsZX' . 'M' . '=', '' . 'WQ==', 'L3Nx' . 'b' . 'C91bmluc3R' . 'hbGwuc3' . 'Fs', 'RE9D' . 'VU1FT' . 'lRfU' . 'k9' . 'PVA==', 'L2' . 'JpdHJpeC' . '9tb2R1' . 'bG' . 'VzLw' . '==', 'L' . '2' . 'luc' . '3RhbG' . 'w' . 'van' . 'Mv', 'RE9DVU1FTlR' . 'fUk' . '9' . 'PVA==', 'L2J' . 'pdHJpeC9q' . 'cy8=', 'L' . 'w==', 'RE9DVU1' . 'F' . 'TlR' . 'f' . 'Uk' . '9' . 'PVA=' . '=', 'L' . '2JpdHJpe' . 'C9tb' . '2' . 'R1' . 'bGV' . 'zLw==', 'L' . '2luc3R' . 'hbGw' . 'vY3NzLw==', 'RE9DV' . 'U1FTl' . 'RfUk9' . 'P' . 'VA==', 'L2Jpd' . 'HJpe' . 'C9jc3Mv', 'L' . 'w' . '==', 'RE9DVU1FT' . 'l' . 'RfU' . 'k' . '9PVA==', 'L2' . 'JpdHJp' . 'eC9' . 't' . 'b2R' . '1bGVzL' . 'w==', '' . 'L2luc' . '3Rhb' . 'Gwve' . 'W' . 'FuZ' . 'GV4X3R1c' . 'm' . 'JvLw==', '' . 'RE9DVU' . '1FTlR' . 'f' . 'Uk' . '9PVA==', 'L' . '2' . 'JpdHJpe' . 'C' . '9waHBfaW5' . '0ZX' . 'Jm' . 'YWNl' . 'L2l' . 'uY2x1' . 'ZGUveWFuZGV4X3' . 'R' . '1' . 'cm' . 'JvLw==', 'RE9DV' . 'U1' . 'FTl' . 'R' . 'fUk' . '9PVA=' . '=', 'L2J' . 'pd' . 'HJpeC9' . 'tb2R1bG' . 'VzLw==', 'L2luc3RhbGwvcHV' . 'ibGl' . 'j', 'RE9DV' . 'U1FTl' . 'RfUk9P' . 'VA==', 'Lw' . '=' . '=', 'b' . 'WFpbg' . '=' . '=', '' . 'd' . 'XB' . 'sb2Fk', 'd' . 'X' . 'Bsb2Fk', 'L' . 'w==', 'L2Fkb' . 'Wlu', 'RE9DVU' . '1F' . 'TlRf' . 'Uk9PV' . 'A' . '==', 'L2JpdH' . 'Jp' . 'eC9hZG1pb' . 'g==', 'L2J' . 'pdHJp' . 'eC' . '9qcy8=', 'Lw=' . '=', 'L2Jp' . 'd' . 'HJpe' . 'C9jc3M' . 'v', '' . 'Lw==', '' . 'L' . '2F' . 'kbWlu', 'R' . 'E' . '9DV' . 'U1' . 'F' . 'T' . 'lRfUk9PVA==', '' . 'L' . '2' . 'JpdHJpeC' . '9' . 'hZG1pb' . 'g=' . '=', '' . 'R' . 'VJS' . 'T1I=', 'R09' . 'PRERFX1RZUkJ' . 'PX0FQSV9ORUVEX01PR' . 'FV' . 'MR' . 'VM=', 'I0' . '1PRFVM' . 'RSM=', 'XEdvb2RkZVxZ' . 'Y' . 'W5k' . 'ZXhUd' . 'XJib' . '1xUdXJibzo6' . 'Q2xlY' . 'W5VcFJ' . 'lcG9y' . 'd' . 'H' . 'NBZ2VudCgpOw==', '' . 'Tg==', 'R' . 'VJST' . '1I' . '=', '' . 'R' . '09PRER' . 'FX1RZU' . 'k' . 'J' . 'PX0F' . 'Q' . 'SV9ORUVE' . 'X1JJR' . '0hUX1Z' . 'FUg==', 'I05' . 'FRUQj', 'QVB' . 'QTElDQVRJT04=', 'Vw==', '' . 'QVBQTE' . 'lD' . 'QVRJT04=', 'R0' . '9' . 'PRERFX1RZUkJPX0' . 'FQSV9JTlNU' . 'X1VO' . 'S' . 'U5' . 'TVF9USV' . 'RMRQ==', 'L' . '3Vuc3R' . 'lcD' . 'Euc' . 'Gh' . 'w', '' . 'c' . '2' . 'F2' . 'ZV' . '90YWJsZ' . 'XM=', '' . 'c2F2ZV90Y' . 'WJsZXM=', 'aQ==', '' . 'R0' . 'xPQkFMUw==', 'c3RyV' . 'Gl0bGU=', 'Zml' . 'sZXBhd' . 'Gg=', 'Q' . 'VBQT' . 'ElDQVR' . 'J' . 'T04=', 'R09' . 'PRERFX1' . 'R' . 'Z' . 'UkJPX0FQSV9NT0R' . 'VTEVfT' . 'kFNRQ==', 'RE9DVU1' . 'FTlRf' . 'U' . 'k9P' . 'VA' . '==', 'L2Jpd' . 'HJpeC9t' . 'b2' . 'R1' . 'b' . 'GVz' . 'L21haW4vaW5jbHVk' . 'ZS9wcm9' . 'sb' . '2' . 'dfYW' . 'RtaW5' . 'fY' . 'W' . 'Z0ZXIucGhw', 'TUVTU' . '0' . 'F' . 'H' . 'R' . 'Q==', 'VFlQRQ' . '==', '' . 'TU9EX0JBQ' . '0s=', 'R' . 'E9DVU1FTlRfUk9P' . 'V' . 'A==', 'L2JpdHJpeC9' . 'tb2' . 'R1bGVz' . 'L' . '21h' . 'aW4vaW5jbHVkZS9lcGls' . 'b2df' . 'Y' . 'WRtaW4u' . 'cGh' . 'w');
        return base64_decode($_350827760[$_887384039]);
    }
};


//@define('yandex_turboapi_DEMO', 'Y');

use \Bitrix\Main\Localization\Loc;

IncludeModuleLangFile(__FILE__);

Class yandex_turboapi extends CModule
{
    var $MODULE_ID = 'yandex.turboapi';
    public $MODULE_VERSION;
    public $MODULE_VERSION_DATE;
    public $MODULE_NAME;
    public $MODULE_DESCRIPTION;
    public $PARTNER_NAME;
    public $PARTNER_URI;
    public $MODULE_GROUP_RIGHTS = 'N';
    public $_1946211970 = '';
    public $_1211272944 = array('iblock');

    function __construct()
    {
        $arModuleVersion = array();
        include(dirname(__FILE__) . '/version.php');
        $this->MODULE_VERSION = $arModuleVersion['VERSION'];
        $this->MODULE_VERSION_DATE = $arModuleVersion['VERSION_DATE'];
        $this->MODULE_NAME = Loc::getMessage('YANDEX_TYRBO_API_MODULE_NAME');
        $this->MODULE_DESCRIPTION = Loc::getMessage('YANDEX_TYRBO_API_MODULE_DESCRIPTION');
        $this->PARTNER_NAME = GetMessage('YANDEX_TYRBO_API_PARTNER_NAME');
        $this->PARTNER_URI = GetMessage('YANDEX_TYRBO_API_PARTNER_URI');
    }

    function InstallDB($_685922158 = array())
    {

        global $DB;
        RegisterModule($this->MODULE_ID);
        $DB->RunSQLBatch(dirname(__FILE__) . '/sql/install.sql');
        return true;
    }

    function UnInstallDB($_685922158 = array())
    {
        global $DB;
        if (!array_key_exists('save_tables', $_685922158) || ($_685922158['save_tables'] !== 'Y')) {
            COption::RemoveOption($this->MODULE_ID);
            $DB->RunSQLBatch(dirname(__FILE__) . '/sql/uninstall.sql');
        }
        UnRegisterModule($this->MODULE_ID);
        return true;
    }

    function InstallEvents()
    {
        return true;
    }

    function UnInstallEvents()
    {
        return true;
    }

    function InstallFiles($_685922158 = array())
    {
        CopyDirFiles($_SERVER['DOCUMENT_ROOT'] . '/bitrix/modules/' . $this->MODULE_ID . '/install/js/', $_SERVER['DOCUMENT_ROOT'] . '/bitrix/js/' . $this->MODULE_ID . '/', true, true);
        CopyDirFiles($_SERVER['DOCUMENT_ROOT'] . '/bitrix/modules/' . $this->MODULE_ID . '/install/css/', $_SERVER['DOCUMENT_ROOT'] . '/bitrix/css/' . $this->MODULE_ID . '/', true, true);
        CopyDirFiles($_SERVER['DOCUMENT_ROOT'] . '/bitrix/modules/' . $this->MODULE_ID . '/install/yandex_turbo/', $_SERVER['DOCUMENT_ROOT'] . '/bitrix/php_interface/include/yandex_turbo/', true, true);
        CopyDirFiles($_SERVER['DOCUMENT_ROOT'] . '/bitrix/modules/' . $this->MODULE_ID . '/install/public', $_SERVER['DOCUMENT_ROOT'] . '/' . COption::GetOptionString('main', 'upload', 'upload') . '/', true, true);
        CopyDirFiles(dirname(__FILE__) . '/admin', $_SERVER['DOCUMENT_ROOT'] . '/bitrix/admin', true);
        return true;
    }

    function UnInstallFiles()
    {
        DeleteDirFilesEx('/bitrix/js/' . $this->MODULE_ID . '/');
        DeleteDirFilesEx('/bitrix/css/' . $this->MODULE_ID . '/');
        DeleteDirFiles(dirname(__FILE__) . '/admin', $_SERVER['DOCUMENT_ROOT'] . '/bitrix/admin');
        return true;
    }

    function DoInstall()
    {
        global $APPLICATION;
        if (is_array($this->_1211272944) && !empty($this->_1211272944)) {
            foreach ($this->_1211272944 as $_422172927) {
                if (!IsModuleInstalled($_422172927)) {
                    $this->__2048416578('ERROR', Loc::getMessage('YANDEX_TYRBO_API_NEED_MODULES', array('#MODULE#' => $_422172927)));
                }
            }
        }
        if (strlen($this->_1946211970) <= 0 || version_compare(SM_VERSION, $this->_1946211970) >= 0) {
            $this->InstallFiles();
            $this->InstallEvents();
            $this->InstallDB();
            CAgent::AddAgent('\Yandex\TurboAPI\Turbo::CleanUpReportsAgent();', $this->MODULE_ID, 'N', 86400);
        } else {
            $this->__2048416578('ERROR', Loc::getMessage('YANDEX_TYRBO_API_NEED_RIGHT_VER', array('#NEED#' => $this->_1946211970)));
        }
    }

    function DoUninstall()
    {
        global $APPLICATION, $step;
        $_1110156606 = $GLOBALS['APPLICATION']->GetGroupRight($this->MODULE_ID);
        if ($_1110156606 === 'W') {
            $step = (int)$step;
            if ($step < 2) {
                $GLOBALS['APPLICATION']->IncludeAdminFile(Loc::getMessage('YANDEX_TYRBO_API_INST_UNINST_TITLE'), dirname(__FILE__) . '/unstep1.php');
            } elseif ($step == 2) {
                $this->UnInstallEvents();
                $this->UnInstallDB(array('save_tables' => $_REQUEST['save_tables']));
                $this->UnInstallFiles();
                CAgent::RemoveModuleAgents($this->MODULE_ID);
            }
        }
    }

    private function __2048416578($type, $_1783672082, $_1714487350 = '')
    {
        $_135494552 = array_keys($GLOBALS);
        for ($_941591893 = 0, $_517424930 = count($_135494552); $_941591893 < $_517424930; $_941591893++) {
            if ($_135494552[$_941591893] != 'i' && $_135494552[$_941591893] != 'GLOBALS' && $_135494552[$_941591893] != 'strTitle' && $_135494552[$_941591893] != 'filepath') {
                global ${$keys[$i]};
            }
        }
        $GLOBALS['APPLICATION']->SetTitle(Loc::getMessage('YANDEX_TYRBO_API_MODULE_NAME'));
        include($_SERVER['DOCUMENT_ROOT'] . '/bitrix/modules/main/include/prolog_admin_after.php');
        echo CAdminMessage::ShowMessage(array('MESSAGE' => $_1783672082, 'TYPE' => $type)); ?>
        <form action="<?= $APPLICATION->GetCurPage() ?>" method="get">
            <p>
                <input type="hidden" name="lang" value="<? echo LANGUAGE_ID; ?>"/>
                <input type="submit"
                       value="<?= strlen($_1714487350) ? $_1714487350 : Loc::getMessage('MOD_BACK') ?>"/>
            </p>
        </form>
        <? include($_SERVER['DOCUMENT_ROOT'] . '/bitrix/modules/main/include/epilog_admin.php');
        die();
    }
} ?>